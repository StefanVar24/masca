import{d as O,u as U,f as n,c as A,a as d,b as o,w as l,g as C,r as u,o as E,h as _,i as y,t as I,I as J,p as $,e as z,j as F,k as L,s as R,_ as j}from"./index.0d1ec7a6.js";const S=c=>($("data-v-595ee15e"),c=c(),z(),c),q={class:"profile"},G=S(()=>d("h1",{id:"title"},"My Credentials",-1)),H={class:"table-header"},K={class:"dtButtons"},Q=S(()=>d("h3",null,"VC",-1)),W=S(()=>d("h3",null,"Metadata",-1)),X=O({__name:"ProfileView",setup(c){const s=U(),p=n(""),v=n(!1),m=n(!1),b=n("Modal"),f=n(""),h=n(""),V=n([]),M=()=>{v.value=!0},g=()=>{p.value="",v.value=!1},x=(a,e,r)=>{b.value=a,f.value=e,h.value=r||"",m.value=!0},N=()=>{b.value="",f.value="",m.value=!1},D=async()=>{try{const a=await F(s.snapApi);return console.log(a),a&&(s.vcs=a),"Success getting VCs"}catch(a){throw console.error(a),a}},P=async()=>{try{if(!V.value)throw new Error("No VC selected");const a=await L(V.value,s.snapApi);if(x("Verifiable Presentation",JSON.stringify(a,null,2)),console.log(a),!a)throw new Error("Failed to create VP");return"VP created"}catch(a){throw new Error(a.message)}},T=async()=>{let a;try{a=JSON.parse(p.value)}catch(e){throw e}try{const e=await R(a,s.snapApi);if(!e)throw new Error("Failed to save VC");return s.vcs.push({data:a,metadata:{id:e[0].id}}),g(),"Success importing VC"}catch(e){throw console.error(e),e}};return(a,e)=>{const r=u("Button"),i=u("Column"),B=u("DataTable"),w=u("Textarea"),k=u("Dialog");return E(),A("div",q,[G,d("div",null,[o(B,{value:C(s).vcs,responsiveLayout:"scroll",removableSort:"",selection:V.value,"onUpdate:selection":e[0]||(e[0]=t=>V.value=t)},{header:l(()=>[d("div",H,[_(" Verifiable Credentials "),d("div",K,[o(y,{label:"Load VCs",method:D,icon:"pi pi-refresh",class:"p-button-rounded"}),o(y,{label:"Create VP",method:P,icon:"pi pi-upload",class:"p-button-rounded"}),o(r,{onClick:M,label:"Import VC",icon:"pi pi-file-import",class:"p-button-outlined p-button-rounded"})])])]),footer:l(()=>[_(" In total there are "+I(C(s).vcs?C(s).vcs.length:0)+" VCs. ",1)]),default:l(()=>[o(i,{selectionMode:"multiple",headerStyle:"width: 3em"}),o(i,{field:"data.type[1]",header:"Type"},{body:l(t=>[_(I(t.data.data.type[1]),1)]),_:1}),o(i,{field:"data.issuanceDate",header:"Issuance Date",sortable:!0},{body:l(t=>[_(I(C(J)(t.data.data.issuanceDate)),1)]),_:1}),o(i,{field:"data.issuer.id",header:"Issuer Id"}),o(i,{field:"metadata.store",header:"Store"}),o(i,{header:"View"},{body:l(t=>[o(r,{icon:"pi pi-search",class:"p-button-rounded p-button-outlined",onClick:Y=>x("Verifiable Credential",JSON.stringify(t.data.data,null,2),JSON.stringify(t.data.metadata,null,2))},null,8,["onClick"])]),_:1})]),_:1},8,["value","selection"])]),o(k,{header:"Import VC (JSON)",visible:v.value,"onUpdate:visible":e[3]||(e[3]=t=>v.value=t),breakpoints:{"960px":"75vw","640px":"90vw"},style:{width:"50vw"},modal:!0},{footer:l(()=>[o(r,{label:"Cancel",icon:"pi pi-times",onClick:e[2]||(e[2]=t=>g()),class:"p-button-text"}),o(y,{label:"Import",method:T,icon:"pi pi-check"})]),default:l(()=>[o(w,{id:"VCImportArea",modelValue:p.value,"onUpdate:modelValue":e[1]||(e[1]=t=>p.value=t),autofocus:"",autoResize:!0,class:"vcImport"},null,8,["modelValue"])]),_:1},8,["visible"]),o(k,{header:b.value,visible:m.value,"onUpdate:visible":e[7]||(e[7]=t=>m.value=t),breakpoints:{"960px":"75vw","640px":"90vw"},style:{width:"50vw"},modal:!0},{footer:l(()=>[o(r,{label:"Close",icon:"pi pi-times",onClick:e[6]||(e[6]=t=>N()),class:"p-button-text"})]),default:l(()=>[Q,o(w,{id:"VCImportArea",modelValue:f.value,"onUpdate:modelValue":e[4]||(e[4]=t=>f.value=t),autoResize:!1,class:"vcImport",disabled:""},null,8,["modelValue"]),W,o(w,{id:"metadata",modelValue:h.value,"onUpdate:modelValue":e[5]||(e[5]=t=>h.value=t),disabled:"",autoResize:!1,class:"vcImport"},null,8,["modelValue"])]),_:1},8,["header","visible"])])}}});const ee=j(X,[["__scopeId","data-v-595ee15e"]]);export{ee as default};
